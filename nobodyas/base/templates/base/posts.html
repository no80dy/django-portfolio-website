{% extends 'base/main.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<style type="text/css">
    #div_id_tags > div{
        overflow-y: scroll;
        max-height: 100px;
        border-radius: 5px;
        padding: 5px;
        border: 1px solid #dee2e6;
    }
    .form-group {
        margin: 10px 0px;
    }
</style>
<div class="container">
    <div class="posts-list row">
        <div class="posts-list-title p-1 mb-4">
            <h5>
                Posts
            </h5>
        </div>
        <div class="p-1 mb-4">
            <form method="GET">
                {{ post_filter.form|crispy }}
                <input class="btn btn-primary" type="submit" value="Search">
            </form>
        </div>
        <div class="p-1">
            <h6 class="posts-list-title-category py-1">
                Web applications
            </h6>
        </div>
        {% for post in posts %}
            <div class="col-sm-4 p-1">
                <div class="posts-list-item">
                    <img class="posts-list-item-image" src="{{ post.image.url }}" alt="img">
                    <div class="p-3">
                        <div>
                            {% for tag in post.tags.all %}
                                <span class="badge bg-secondary">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                        <h5 class="posts-list-item-title my-2">
                            {{ post.title }}
                        </h5>
                        <p class="posts-list-item-description">
                            {{ post.sub_title }}
                        </p>
                        <a href="{{ post.get_absolute_url }}">
                            Read more
                        </a>
                        {% if request.user.is_authenticated %}
                            | <a href="{% url 'update_post' post.id %}">Edit</a>
                            | <a href="{% url 'delete_post' post.id %}">Delete</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}
